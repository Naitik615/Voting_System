(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const p of o.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function c(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(e){if(e.ep)return;e.ep=!0;const o=c(e);fetch(e.href,o)}})();const h=document.getElementById("form"),s=document.getElementById("submit-btn"),d=document.getElementById("voiceBtn"),y=document.getElementById("langBtn"),b=document.querySelector(".lang-dropdown");let r="en",i,l=!1,u="",g=!1,f,m;y.addEventListener("click",()=>{b.classList.toggle("show")});document.addEventListener("click",t=>{t.target.closest(".language-selector")||b.classList.remove("show")});document.querySelectorAll(".lang-option").forEach(t=>{t.addEventListener("click",n=>{r=n.target.dataset.lang,b.classList.remove("show"),L()})});d.addEventListener("click",w);function w(){if(!("webkitSpeechRecognition"in window)){alert("Speech recognition is not supported in your browser.");return}u="",l=!1,g=!1,f&&clearTimeout(f),m&&clearTimeout(m),i=new webkitSpeechRecognition,i.continuous=!1,i.interimResults=!1,i.lang=r==="en"?"en-US":"hi-IN",i.onresult=t=>{const n=t.results[0][0].transcript;E(n)},i.onend=()=>{l=!1,d.textContent="ЁЯОд Start Voice Input"},v()}function v(){if(g)return;g=!0;const t=r==="en"?"Welcome to the voting system. Please speak your 12-digit Aadhaar number slowly, with a small pause between each digit.":"рдорддрджрд╛рди рдкреНрд░рдгрд╛рд▓реА рдореЗрдВ рдЖрдкрдХрд╛ рд╕реНрд╡рд╛рдЧрдд рд╣реИред рдХреГрдкрдпрд╛ рдЕрдкрдирд╛ 12 рдЕрдВрдХреЛрдВ рдХрд╛ рдЖрдзрд╛рд░ рдирдВрдмрд░ рдзреАрд░реЗ-рдзреАрд░реЗ рдмреЛрд▓реЗрдВ, рдкреНрд░рддреНрдпреЗрдХ рдЕрдВрдХ рдХреЗ рдмреАрдЪ рдереЛрдбрд╝рд╛ рд╡рд┐рд░рд╛рдо рджреЗрдХрд░ред",n=new SpeechSynthesisUtterance(t);n.lang=r==="en"?"en-US":"hi-IN",n.onend=()=>{g=!1,m=setTimeout(()=>{S()},500)},window.speechSynthesis.speak(n)}function S(){l||(l=!0,d.textContent="ЁЯОд Listening...",i.start(),f=setTimeout(()=>{l&&(i.stop(),l=!1,d.textContent="ЁЯОд Start Voice Input",u.length<12&&alert(r==="en"?"Please try speaking your Aadhaar number again.":"рдХреГрдкрдпрд╛ рдЕрдкрдирд╛ рдЖрдзрд╛рд░ рдирдВрдмрд░ рдлрд┐рд░ рд╕реЗ рдмреЛрд▓реЗрдВред"))},1e4))}function E(t){const n=t.match(/\d/g);n&&(n.forEach(c=>{if(u.length<12){u+=c;const a=document.getElementById("aadhar");a&&(a.value=u)}}),u.length===12&&(f&&clearTimeout(f),m&&clearTimeout(m),i.stop(),h.dispatchEvent(new Event("submit"))))}function L(){const t={en:{aadhar:"Enter your Aadhaar Number:",submit:"Submit",voice:"Start Voice Input"},hi:{aadhar:"рдЕрдкрдирд╛ рдЖрдзрд╛рд░ рдирдВрдмрд░ рджрд░реНрдЬ рдХрд░реЗрдВ:",submit:"рдЬрдорд╛ рдХрд░реЗрдВ",voice:"рд╡реЙрдЗрд╕ рдЗрдирдкреБрдЯ рд╢реБрд░реВ рдХрд░реЗрдВ"}};document.querySelector('label[for="aadhar"]').textContent=t[r].aadhar,s.textContent=t[r].submit,d.textContent=t[r].voice}h.addEventListener("submit",async function(t){t.preventDefault(),s.disabled=!0,s.textContent="Verifying...";const n=new FormData(h),c={};n.forEach((e,o)=>{c[o]=e});const a=c.aadhar;try{(await fetch(`http://localhost:3000/check/${a}`,{method:"GET",headers:{"Content-Type":"application/json"}})).ok?(localStorage.setItem("formData",JSON.stringify({num:a})),window.showVerificationPopup(),s.disabled=!1,s.textContent=labels[r].submit):(alert(r==="en"?"Invalid Aadhaar number. Please try again.":"рдЕрдорд╛рдиреНрдп рдЖрдзрд╛рд░ рдирдВрдмрд░ред рдХреГрдкрдпрд╛ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред"),s.disabled=!1,s.textContent=labels[r].submit)}catch(e){console.error("Network error:",e),s.disabled=!1,s.textContent=labels[r].submit}});
